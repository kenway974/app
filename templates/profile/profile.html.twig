{% extends 'base.html.twig' %}

{% block title %}Profil de {{ app.user.username }}{% endblock %}

{% block body %}
<link rel="stylesheet" href="{{ asset('styles/profile_basic.css') }}">

<div class="container">
    <h1>Profil de {{ app.user.username }}</h1>

    <div class="profile-section">
        <img class="profile-picture" src="{{ asset('uploads/images/profile/' ~ app.user.profilePic) }}" alt="Photo de profil">
        <p><strong>Nom d'utilisateur :</strong> {{ app.user.username }}</p>
        <p><strong>Niveau :</strong> {{ app.user.level }}</p>
        <p><strong>XP :</strong> {{ app.user.xp }}</p>
        <div class="progress-bar">
            <div class="progress" style="width: {{ app.user.xp }}%"></div>
        </div>
        <p><a href="{{ path('app_profile_edit', { id: app.user.id }) }}">✏️ Modifier le profil</a></p>
    </div>

    <hr>

    <h2>Tâches : {{ app.user.tasks|length }}</h2>
    <h2>Objectifs : {{ app.user.goals|length }}</h2>
    <ul>
        {% for goal in app.user.goals %}
            <li>
                <a href="{{ path('app_goal_show', {id: goal.id}) }}">{{ goal.title }}</a>
                - {{ goal.description }}
                (Échéance : {{ goal.dateButoir|date('d/m/Y') }})
            </li>
        {% else %}
            <li>Aucun objectif défini.</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Statistiques</h2>
    <ul>
        {% for stat in app.user.stats %}
            <li>
                <a href="{{ path('app_stat_show', {id: stat.id}) }}">{{ stat.title }}</a> : {{ stat.score }}
            </li>
        {% else %}
            <li>Aucune statistique disponible.</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Trophées ({{ app.user.trophies|length }})</h2>
    <ul>
        {% for trophy in app.user.trophies %}
            <li>
                <img src="{{ asset('images/trophies/' ~ trophy.image) }}" alt="{{ trophy.title }}" style="width: 30px; height: 30px;">
                <strong>{{ trophy.title }}</strong> : {{ trophy.description }}
            </li>
        {% else %}
            <li>Aucun trophée débloqué.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
